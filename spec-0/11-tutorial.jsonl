{"id":"U0","t":"meta","s":"Spec11 field-course ledger (PO+QA+FDE). Purpose=experiment/showcase/use/e2e-verify current impl. Style=ultra-terse, proof-first, drift-aware."}
{"id":"U1","p":"U0","t":"meta","s":"Keys:id,p,t,who,obj,ctx,pre,ui,cmd,api,sql,ok,bad,gate,task,cur,note. JSONL lines are atomic; execute top-down or by role."}
{"id":"U2","p":"U0","t":"stance","s":"Product story=deterministic control-plane over append-only ledgers. Demo value=provable behavior under drift/failure/load, not polish."}
{"id":"U3","p":"U0","t":"law","s":"Priority: contract>det/fail-closed>SQL-x1>throughput/style. Oracle order: app SQL -> dbos SQL -> API JSON -> logs(last)."}
{"id":"U4","p":"U0","t":"law","s":"Run ingress=/api/run canonical. Ops surface exact-six. Queue law parent intentQ / child sbxQ. HITL reply/event require origin. Any red lane=>NO_GO."}
{"id":"U5","p":"U0","t":"ban","s":"No retry-as-fix,no silent fallback,no logs-as-proof,no grep-only policy proof,no terminal->nonterminal narrative claim,no clock/random identity claims."}
{"id":"U6","p":"U0","t":"roles","s":"PO stops at narrative+proof pointers. QA stops at fail-closed/zero-write/x1 SQL packs. FDE stops at triage+repro+ops+signoff verdict."}
{"id":"U7","p":"U0","t":"reality","s":"Spec11 is demoable but not signoff-complete. Closure blocked (T40); scenario-matrix proof GP81 missing (T32,T33); many UI/proof boards are PART/OPEN."}
{"id":"U8","p":"U0","t":"reality","s":"Use boards for operator UX demo; use API+SQL for truth. Treat current Proof/Throughput/Signoff surfaces as convenience unless backed by explicit evidence refs/queries."}
{"id":"U9","p":"U0","t":"learn","s":"If iterating tests manually: never TRUNCATE recipe seeds; cancel active workflows before teardown/shutdown; signoff divergence proof is appPool->sysPool two-step (no cross-db join)."}

{"id":"U10","p":"U0","t":"preflight","who":"all","obj":"deterministic lab (split default)","cmd":["export BASE=http://127.0.0.1:3001","export APPV=spec11-tut-v1","export OC_MODE=replay SBX_MODE=mock SBX_PROVIDER=e2b WORKFLOW_RUNTIME_MODE=api-shim SBX_QUEUE_PARTITION=true","MISE_TASK_OUTPUT=prefix mise install","mise run db:up","mise run db:sys:reset && mise run db:reset && mise run db:migrate","mise run build"],"ok":"toolchain+db+build green"}
{"id":"U11","p":"U10","t":"boot","who":"all","obj":"split topology parity lane","cmd":["PORT=3001 ADMIN_PORT=3002 DBOS__APPVERSION=$APPV OC_MODE=$OC_MODE SBX_MODE=$SBX_MODE SBX_PROVIDER=$SBX_PROVIDER WORKFLOW_RUNTIME_MODE=$WORKFLOW_RUNTIME_MODE SBX_QUEUE_PARTITION=$SBX_QUEUE_PARTITION mise run start:worker","PORT=3001 ADMIN_PORT=3003 DBOS__APPVERSION=$APPV OC_MODE=$OC_MODE SBX_MODE=$SBX_MODE SBX_PROVIDER=$SBX_PROVIDER WORKFLOW_RUNTIME_MODE=$WORKFLOW_RUNTIME_MODE SBX_QUEUE_PARTITION=$SBX_QUEUE_PARTITION mise run start:api-shim"],"note":"2 terminals; same DBOS__APPVERSION both processes."}
{"id":"U12","p":"U10","t":"smoke","who":"all","cmd":["curl -sf $BASE/healthz | jq .","curl -sf $BASE/api/ops/queue-depth?limit=5 | jq .","scripts/db/psql-app.sh -c 'select 1'","scripts/db/psql-sys.sh -c 'select 1'"],"ok":"HTTP+app/sys SQL alive"}
{"id":"U13","p":"U10","t":"ui-shell","who":"PO+FDE","ui":["/ (Run Console default)","/?board=hitl-inbox","/?board=ops","/?board=throughput","/?board=recipe","/?board=signoff"],"ok":"all boards load (content may be empty)"}
{"id":"U14","p":"U10","t":"ui-run-tabs","who":"PO+QA","ui":["/?wid=<wid>&board=run&tab=timeline","/?wid=<wid>&board=run&tab=gate","/?wid=<wid>&board=run&tab=artifacts","/?wid=<wid>&board=run&tab=patches","/?wid=<wid>&board=run&tab=proof"],"note":"Known drift T5: tab=proof deep-link falls back to timeline; click Proof tab manually."}
{"id":"U15","p":"U10","t":"seed","who":"QA","obj":"stable recipeRef for curl paths","cmd":["R=$(scripts/db/psql-app.sh -Atc \"select rv.id||'@'||rv.v from app.recipe_versions rv join app.recipes r on r.id=rv.id and r.active_v=rv.v order by rv.created_at desc limit 1\")","RID=${R%@*}; RV=${R#*@}; echo $RID $RV"],"ok":"RID/RV non-empty"}
{"id":"U16","p":"U10","t":"payload","who":"QA","obj":"canonical /api/run payload template","cmd":["B=$(jq -nc --arg id \"$RID\" --arg v \"$RV\" '{recipeRef:{id:$id,v:$v},formData:{goal:\"spec11 tutorial\",tenant:\"acme\"},opts:{queuePartitionKey:\"tenant-acme\",lane:\"interactive\"}}')","echo \"$B\" | jq ."],"ok":"strict payload only recipeRef+formData+opts"}
{"id":"U17","p":"U10","t":"ui-start-note","who":"PO","s":"ChatInput now uses canonical client seam /api/run (`startRun`), default pinned recipe `compile-default@v1`, qpk=`ui-default`, lane=`interactive`; budget editor exists but merged preview is not trustworthy yet (T2)."}

{"id":"U20","p":"U0","t":"po-demo","who":"PO","obj":"S00+S01 canonical happy path via UI","ui":["Open `/`","Type goal; click Run","Observe WID + status progression in Run board"],"ok":"workflow created; timeline/proof tabs become available","task":["T1","T3","T39"],"note":"UI error banners incomplete for 400/404/500; use QA API checks for lattice proof."}
{"id":"U21","p":"U20","t":"po-demo","who":"PO","obj":"Capture WID for cross-board flow","cmd":["W=$(curl -sS '$BASE/api/ops/wf?limit=5' | jq -r '.[0].workflowID // .[0].workflowId // empty')","echo W=$W"],"ok":"have recent WID if UI not easily copyable"}
{"id":"U22","p":"U20","t":"po-demo","who":"PO","obj":"S01 API-backed canonical start (scriptable)","cmd":["W=$(curl -sS -X POST $BASE/api/run -H 'content-type: application/json' -d \"$B\" | tee /tmp/spec11.run.json | jq -r '.workflowID')","echo W=$W"],"api":["POST /api/run"],"ok":"202 + workflowID=ih_<sha256> + header payload"}
{"id":"U23","p":"U20","t":"po-demo","who":"PO","obj":"Observe run progression","cmd":["for i in $(seq 1 120); do curl -sS $BASE/api/runs/$W | tee /tmp/spec11.hdr.json | jq '{workflowID,status,nextAction,lastStep,retryCount}'; S=$(jq -r .status /tmp/spec11.hdr.json); echo $S | grep -Eq 'SUCCESS|ERROR|CANCELLED|waiting_input|WAITING_INPUT' && break; sleep 0.5; done","curl -sS $BASE/api/runs/$W/steps | tee /tmp/spec11.steps.json | jq 'map({stepID,attempt,status,phase})'"],"api":["GET /api/runs/:wid","GET /api/runs/:wid/steps"],"ok":"status monotonic; stable step IDs visible"}
{"id":"U24","p":"U20","t":"po-demo","who":"PO","obj":"S04 HITL gate path (if run enters waiting_input)","cmd":["curl -sS $BASE/api/runs/$W/gates | tee /tmp/spec11.gates.json | jq .","G=$(jq -r '.[0].gateKey // empty' /tmp/spec11.gates.json); test -n \"$G\" && echo G=$G || true","test -n \"$G\" && curl -sS \"$BASE/api/runs/$W/gates/$G?timeoutS=3\" | jq . || true"],"api":["GET /api/runs/:wid/gates","GET /api/runs/:wid/gates/:gateKey?timeoutS=3"],"ok":"bounded long-poll; gate payload present if waiting_input","bad":"Not every run produces HITL; force via S04/S05-specific flow when needed."}
{"id":"U25","p":"U20","t":"po-demo","who":"PO","obj":"S04 reply (manual)","pre":"Have W,G","cmd":["curl -sS -X POST $BASE/api/runs/$W/gates/$G/reply -H 'content-type: application/json' -d '{\"payload\":{\"choice\":\"yes\"},\"dedupeKey\":\"ui-demo-1\",\"origin\":\"manual\"}' | jq .","curl -sS $BASE/api/runs/$W | jq '{status,nextAction,lastStep,error}'"],"api":["POST /api/runs/:wid/gates/:gateKey/reply"],"ok":"reply accepted; run resumes/terminals"}
{"id":"U26","p":"U20","t":"po-demo","who":"PO","obj":"HITL Inbox board walkthrough","ui":["Open `/?board=hitl-inbox`","Inspect SLA badges + mismatch risk + escalation IDs","Click Open Gate"],"ok":"cross-run inbox visible when pending gates exist","task":["T4"],"note":"Known drift T4: URL includes `gate=` but Run board ignores focus param; manually select/scan gate after landing."}
{"id":"U27","p":"U20","t":"po-demo","who":"PO","obj":"S07 ops demo in board","ui":["Open `/?board=ops`","Select workflow","Use Cancel/Resume/Fork controls"],"ok":"mutations hit Ops endpoints + refresh state","task":["T7","T8","T9"],"note":"Do not trust drawer legality/previews fully yet; QA verifies via API+SQL."}
{"id":"U28","p":"U20","t":"po-demo","who":"PO","obj":"S08 proof/repro demo in Run board","ui":["Open Run board for W","Click Proof tab (manual click; not deep-link)","Open Repro and Triage subtabs"],"api":["GET /api/runs/:wid/proofs","GET /api/runs/:wid/repro"],"ok":"proof cards + repro download button render","task":["T10","T11","T12","T13","T14","T37"],"note":"Current Proof tab is heuristic/partially unasserted; use SQL/API below for actual proof claims."}
{"id":"U29","p":"U20","t":"po-demo","who":"PO","obj":"S15 signoff board demo (binary UI)","ui":["Open `/?board=signoff`"],"api":["GET /api/ops/signoff"],"ok":"GO/NO_GO banner + PF strip + proof strip + rollback strip render","task":["T24","T25","T26","T27","T28","T29","T30","T31","T40"],"note":"Current overall project verdict remains NO_GO until T24-T35/T40 closure proofs exist in one tree."}

{"id":"U30","p":"U0","t":"qa-core","who":"QA","obj":"S01 persisted identity/hash proof","sql":["scripts/db/psql-app.sh -c \"select workflow_id,status,intent_hash,recipe_id,recipe_v,recipe_hash,queue_partition_key from app.runs where workflow_id='$W'\"","scripts/db/psql-app.sh -c \"select step_id,attempt,phase from app.run_steps where run_id=(select id from app.runs where workflow_id='$W') order by step_id,attempt\""],"ok":"hash/ref persisted; steps append"}
{"id":"U31","p":"U30","t":"qa-core","who":"QA","obj":"S02 idem replay","cmd":["W1=$(curl -sS -X POST $BASE/api/run -H 'content-type: application/json' -d \"$B\" | jq -r .workflowID)","W2=$(curl -sS -X POST $BASE/api/run -H 'content-type: application/json' -d \"$B\" | jq -r .workflowID)","test \"$W1\" = \"$W2\" && echo idem-ok"],"ok":"same payload => same WID"}
{"id":"U32","p":"U30","t":"qa-core","who":"QA","obj":"S02 drift conflict 409","cmd":["B2=$(echo \"$B\" | jq '.opts.queuePartitionKey=\"tenant-other\"')","curl -sS -o /tmp/spec11.409.json -w '%{http_code}\\n' -X POST $BASE/api/run -H 'content-type: application/json' -d \"$B2\"","jq . /tmp/spec11.409.json"],"ok":"409 + drift fields","task":["T1"],"note":"UI surfaces 409 well; other lattice statuses mostly console-only in ChatInput."}
{"id":"U33","p":"U30","t":"qa-core","who":"QA","obj":"S03 malformed JSON 400 + zero writes","cmd":["BR=$(scripts/db/psql-app.sh -Atc \"select count(*) from app.runs\")","curl -sS -o /tmp/spec11.badjson.out -w '%{http_code}\\n' -X POST $BASE/api/run -H 'content-type: application/json' --data '{bad'","AR=$(scripts/db/psql-app.sh -Atc \"select count(*) from app.runs\")","test \"$BR\" = \"$AR\" && echo zero-write"],"ok":"400 + zero writes"}
{"id":"U34","p":"U30","t":"qa-core","who":"QA","obj":"S03 schema/policy 400s","cmd":["curl -sS -o /tmp/spec11.badfield.out -w '%{http_code}\\n' -X POST $BASE/api/run -H 'content-type: application/json' -d '{\"recipeRef\":{\"id\":\"compile-default\",\"v\":\"v1\"},\"formData\":{\"goal\":\"x\"},\"opts\":{\"queuePartitionKey\":\"q\"},\"bogus\":1}'","curl -sS -o /tmp/spec11.nopart.out -w '%{http_code}\\n' -X POST $BASE/api/run -H 'content-type: application/json' -d '{\"recipeRef\":{\"id\":\"compile-default\",\"v\":\"v1\"},\"formData\":{\"goal\":\"x\"}}'"],"ok":"both 400 under strict partition posture"}
{"id":"U35","p":"U30","t":"qa-core","who":"QA","obj":"S04/S05 reply x-once/drift","pre":"Have waiting-input W,G","cmd":["curl -sS -X POST $BASE/api/runs/$W/gates/$G/reply -H 'content-type: application/json' -d '{\"payload\":{\"choice\":\"yes\"},\"dedupeKey\":\"qa-hitl-1\",\"origin\":\"manual\"}' | jq .","curl -sS -X POST $BASE/api/runs/$W/gates/$G/reply -H 'content-type: application/json' -d '{\"payload\":{\"choice\":\"yes\"},\"dedupeKey\":\"qa-hitl-1\",\"origin\":\"manual\"}' | jq .","curl -sS -o /tmp/spec11.hitl409.out -w '%{http_code}\\n' -X POST $BASE/api/runs/$W/gates/$G/reply -H 'content-type: application/json' -d '{\"payload\":{\"choice\":\"no\"},\"dedupeKey\":\"qa-hitl-1\",\"origin\":\"manual\"}'"],"ok":"same dedupe+same payload idem; drift=>409"}
{"id":"U36","p":"U30","t":"qa-core","who":"QA","obj":"S04/S06 contract bounds","pre":"Have waiting-input W,G","cmd":["curl -sS -o /tmp/spec11.gate.timeout.bad.out -w '%{http_code}\\n' \"$BASE/api/runs/$W/gates/$G?timeoutS=99\"","curl -sS -o /tmp/spec11.reply.origin.miss.out -w '%{http_code}\\n' -X POST $BASE/api/runs/$W/gates/$G/reply -H 'content-type: application/json' -d '{\"payload\":{\"choice\":\"yes\"},\"dedupeKey\":\"no-origin\"}'","curl -sS -o /tmp/spec11.evt.topic.mismatch.out -w '%{http_code}\\n' -X POST $BASE/api/events/hitl -H 'content-type: application/json' -d \"{\\\"workflowId\\\":\\\"$W\\\",\\\"gateKey\\\":\\\"$G\\\",\\\"topic\\\":\\\"human:wrong\\\",\\\"payload\\\":{\\\"choice\\\":\\\"yes\\\"},\\\"dedupeKey\\\":\\\"evt-bad\\\",\\\"origin\\\":\\\"manual\\\"}\""],"ok":"400/400/409"}
{"id":"U37","p":"U30","t":"qa-core","who":"QA","obj":"Ops mutation audit SQL","sql":["scripts/db/psql-app.sh -c \"select run_id,step_id,inline->>'op' op,inline->>'actor' actor,inline->>'reason' reason from app.artifacts where step_id='OPS' order by created_at desc limit 20\""],"ok":"accepted ops append actor+reason"}
{"id":"U38","p":"U30","t":"qa-core","who":"QA","obj":"Global x-once duplicate pack","sql":["scripts/db/psql-app.sh -c \"select count(*) from (select run_id,step_id,attempt,count(*) c from app.run_steps group by 1,2,3 having count(*)>1)x\"","scripts/db/psql-app.sh -c \"select count(*) from (select run_id,step_id,idx,task_key,count(*) c from app.artifacts group by 1,2,3,4 having count(*)>1)x\"","scripts/db/psql-app.sh -c \"select count(*) from (select workflow_id,gate_key,topic,dedupe_key,count(*) c from app.human_interactions group by 1,2,3,4 having count(*)>1)x\""],"ok":"all zero"}
{\"id\":\"U39\",\"p\":\"U30\",\"t\":\"qa-core\",\"who\":\"QA\",\"obj\":\"Repro pack truth pack\",\"cmd\":[\"pnpm exec tsx scripts/repro-pack.ts --run $W --out .tmp/repro.$W.json\",\"jq '{meta:.meta,run:.run.workflow_id,dbosStatus:(.dbos.parentStatuses|length),dbosEvents:(.dbos.parentEvents|length)}' .tmp/repro.$W.json\"],\"ok\":\"contains app.* + dbos parent/child scope\"}

{"id":"U40","p":"U0","t":"fde-loop","who":"FDE","obj":"Ops6 API surface drill","api":["GET /api/ops/wf","GET /api/ops/wf/:wid","GET /api/ops/wf/:wid/steps","POST /api/ops/wf/:wid/cancel","POST /api/ops/wf/:wid/resume","POST /api/ops/wf/:wid/fork","GET /api/ops/queue-depth"],"cmd":["curl -sS '$BASE/api/ops/wf?limit=20' | jq '.[0]'","curl -sS '$BASE/api/ops/queue-depth?limit=20' | jq ."],"ok":"exact-six+queue-depth reachable"}
{"id":"U41","p":"U40","t":"fde-loop","who":"FDE","obj":"Queue/backlog provenance sanity","sql":["scripts/db/psql-sys.sh -c \"select workflow_uuid,queue_name,queue_partition_key,status,application_version from dbos.workflow_status order by created_at desc limit 40\"","scripts/db/psql-app.sh -c \"select * from app.v_ops_queue_depth order by queue_name,status limit 50\""],"ok":"intentQ/sbxQ + qpk propagation visible when enabled"}
{"id":"U42","p":"U40","t":"fde-loop","who":"FDE","obj":"S09 split parity/restart durability","cmd":["pnpm exec vitest run test/e2e/api-shim.test.ts --config vitest.config.ts"],"gate":"GP50","ok":"shim+worker restart converges; no dup side effects"}
{"id":"U43","p":"U40","t":"fde-loop","who":"FDE","obj":"S10/S11 throughput proofs (backend truth)","cmd":["pnpm exec vitest run test/integration/queue-partition-fairness.test.ts test/integration/queue-rate-limit.test.ts test/integration/spec10-priority-latency.test.ts test/integration/spec10-dedupe-collapse.test.ts test/integration/spec10-budget-ingress.test.ts test/integration/spec10-budget-runtime.test.ts --config vitest.config.ts","pnpm exec vitest run test/integration/sbx-template-rotation.test.ts test/integration/sbx-template-perf.test.ts --config vitest.config.ts"],"gate":"GP60-GP65","ok":"queue+budget+template semantics proven via tests+SQL"}
{"id":"U44","p":"U40","t":"fde-loop","who":"FDE","obj":"S10/S11 throughput board current UX","ui":["/?board=throughput"],"api":["GET /api/ops/throughput"],"ok":"board renders sections/cards","task":["T17","T18","T19","T20","T38"],"note":"Treat visible metrics as hypotheses unless per-card provenance/rawRef is shown and matches SQL/artifacts."}
{"id":"U45","p":"U40","t":"fde-loop","who":"FDE","obj":"S12 recipe registry backend-first flow","api":["GET /api/recipes","GET /api/recipes/:id/versions","POST /api/recipes/import","POST /api/recipes/export"],"ui":["/?board=recipe"],"cmd":["curl -sS $BASE/api/recipes | jq '.[0]'"],"ok":"list/version/import/export endpoints exist","task":["T21"],"note":"Current board has inert import/export buttons and partial start UX; use APIs/SQL for verification."}
{"id":"U46","p":"U40","t":"fde-loop","who":"FDE","obj":"S13 patch review backend-first","api":["GET /api/runs/:wid/steps/ApplyPatchST/patches"],"cmd":["curl -sS $BASE/api/runs/$W/steps/ApplyPatchST/patches | jq ."],"sql":["scripts/db/psql-app.sh -c \"select run_id,step_id,patch_index,preimage_hash,postimage_hash,diff_hash,applied_at,rolled_back_at from app.patch_history order by created_at desc limit 20\""],"ok":"route+SQL expose reversible tuple","task":["T22","T23"],"note":"UI panel omits some guard/hash semantics; verify in SQL."}
{"id":"U47","p":"U40","t":"fde-loop","who":"FDE","obj":"S14 live-smoke posture (bounded claim)","cmd":["mise run oc:live:smoke","mise run sbx:live:smoke"],"gate":"GP52","ok":"strict-mode missing creds fail closed; success proves path not broad readiness","note":"Use only for bounded claim; no marketing overclaim."}
{"id":"U48","p":"U40","t":"fde-loop","who":"FDE","obj":"Crash durability floor","cmd":["mise run -f wf:crashdemo"],"gate":"GP4","ok":"SUCCESS + durable marks","note":"If teardown hangs in local harness, cancel active workflows before DBOS shutdown (learning CY9)."}
{"id":"U49","p":"U40","t":"fde-loop","who":"FDE","obj":"Triage order (fixed)","s":"1 /healthz 2 run APIs 3 app SQL (runs/run_steps/artifacts/human) 4 dbos workflow_status/events 5 repro-pack 6 logs(last)."}

{"id":"U50","p":"U0","t":"scenario","who":"all","obj":"S00 Bootstrap+ClaimScope","cur":"PART","ctx":"PF/tooling/runtime mostly ship; claim-scope UX/contracts still drift.","ui":["/","/?board=signoff"],"gate":["GP0","GP1","GP2","GP3"],"task":["T15","T16"],"note":"Use shell/env + signoff board posture as partial posture proof only."}
{"id":"U51","p":"U0","t":"scenario","who":"all","obj":"S01 Canonical /api/run happy path","cur":"PART","api":["POST /api/run","GET /api/runs/:wid","GET /api/runs/:wid/steps"],"sql":["app.runs hash/ref fields","app.run_steps stable step IDs"],"gate":["GP10","GP13"],"task":["T1","T3","T39"],"note":"Backend strong; Run Console UX/copy still drifts."}
{"id":"U52","p":"U0","t":"scenario","who":"QA","obj":"S02 idem replay + drift 409","cur":"PART","api":["POST /api/run replay","POST /api/run drifted tuple"],"sql":["duplicate app.runs by workflow_id = 0"],"gate":["GP11"],"task":["T1"],"note":"UI conflict table exists; broader lattice UX incomplete."}
{"id":"U53","p":"U0","t":"scenario","who":"QA","obj":"S03 fail-closed ingress + zero-write","cur":"PART","api":["POST /api/run malformed/schema/policy","POST ops/hitl invalid queries"],"sql":["pre/post counts unchanged"],"gate":["GP12","GP23"],"task":["T1"],"note":"Backend lattice is core truth; ChatInput surfaces 409 better than 400/404/500."}
{"id":"U54","p":"U0","t":"scenario","who":"PO+QA","obj":"S04 HITL canonical gate","cur":"PART","api":["GET/POST gate routes"],"ui":["Run Gate tab","HITL Inbox board"],"gate":["GP20","GP23"],"task":["T4","T36","T39"],"note":"Ingress semantics good; inbox deep-link/focus and some UI contract reuse still drift."}
{"id":"U55","p":"U0","t":"scenario","who":"QA+FDE","obj":"S05 HITL dedupe/drift/late/timeout/escalation","cur":"PART","api":["reply dup/drift","timeout escalation"],"sql":["human_interactions x1 tuple","dbos esc:* workflows"],"gate":["GP20","GP21"],"task":["T36","T39"],"note":"Semantics proven; operator messaging/state polish incomplete."}
{"id":"U56","p":"U0","t":"scenario","who":"FDE","obj":"S06 external HITL event ingress","cur":"PART","api":["POST /api/events/hitl"],"sql":["human_interactions origin/topic/payload_hash"],"gate":["GP22"],"task":["T36"],"note":"Backend shares ledger semantics; unified manual/external event timeline UX still weak."}
{"id":"U57","p":"U0","t":"scenario","who":"FDE","obj":"S07 Ops6 control during incident","cur":"PART","ui":["/?board=ops","Run inline ops controls"],"api":["/api/ops/wf*","/api/ops/queue-depth"],"sql":["OPS artifacts"],"gate":["GP30","GP31","GP32"],"task":["T7","T8","T9"],"note":"Core ops semantics ship; board/drawer fail-closed UX and provenance incomplete."}
{"id":"U58","p":"U0","t":"scenario","who":"PO+QA+FDE","obj":"S08 Proof/Repro + SQL-first triage","cur":"PART","ui":["Run Proof tab"],"api":["GET /api/runs/:wid/proofs","GET /api/runs/:wid/repro"],"sql":["app/dbos queries from repro pack"],"gate":["GP40","GP41"],"task":["T10","T11","T12","T13","T14","T37"],"note":"UI exists but proof-card ABI/projection/panel semantics not signoff-grade yet."}
{"id":"U59","p":"U0","t":"scenario","who":"FDE","obj":"S09 split topology parity + restart durability","cur":"PART","ui":["topology diagnostics card (if shown)"],"api":["/healthz","ops queue-depth"],"sql":["dbos.workflow_status application_version"],"gate":["GP50","GP51"],"task":["T16"],"note":"Backend/e2e proof strong; diagnostic card evidence labeling incomplete."}
{"id":"U60","p":"U0","t":"scenario","who":"QA+FDE","obj":"S10 queue fairness/rate/priority/dedupe","cur":"PART","ui":["/?board=throughput"],"api":["GET /api/ops/throughput"],"sql":["dbos.workflow_status/app.v_ops_queue_depth"],"gate":["GP60","GP61","GP62","GP63"],"task":["T17","T18","T19","T20","T38"],"note":"Proofs exist; board contract/provenance coverage incomplete."}
{"id":"U61","p":"U0","t":"scenario","who":"QA+PO","obj":"S11 budget guards ingress+runtime","cur":"PART","ui":["Chat budget editor"],"api":["POST /api/run with bad budget"],"sql":["BUDGET artifacts"],"gate":["GP64"],"task":["T2"],"note":"Backend budget law strong; current UI 'Merged Effective' preview is decorative."}
{"id":"U62","p":"U0","t":"scenario","who":"FDE+QA","obj":"S12 recipe flywheel","cur":"PART","ui":["/?board=recipe"],"api":["/api/recipes","/api/recipes/import","/api/recipes/export","POST /api/run pinned recipeRef"],"sql":["app.recipe_versions/app.recipes.active_v"],"gate":["GP70","GP71"],"task":["T21"],"note":"Backend lifecycle/pin law ship; board import/export/start UX partial."}
{"id":"U63","p":"U0","t":"scenario","who":"FDE+QA","obj":"S13 reversible patch + rollback","cur":"PART","ui":["Run Patches tab"],"api":["GET /api/runs/:wid/steps/:stepId/patches"],"sql":["app.patch_history"],"gate":["GP72"],"task":["T22","T23"],"note":"Reversible tuple/rollback law ship; UI omits some hash/guard details."}
{"id":"U64","p":"U0","t":"scenario","who":"PO+FDE","obj":"S14 live integrations strict smoke (bounded claim)","cur":"PART","cmd":["mise run oc:live:smoke","mise run sbx:live:smoke"],"ui":["posture badges/tiles"],"gate":["GP52"],"task":["T15","T16"],"note":"Bounded claim only: path/strictness, not end-to-end readiness."}
{"id":"U65","p":"U0","t":"scenario","who":"PO+QA+FDE","obj":"S15 binary signoff + rollback triggers","cur":"PART/BLOCKED","ui":["/?board=signoff"],"api":["GET /api/ops/signoff"],"gate":["GP80"],"task":["T24","T25","T26","T27","T28","T29","T30","T31","T32","T33","T40"],"note":"Board exists; closure unsupported until scenario-matrix+proof gaps close and PF lanes rerun same tree."}
{"id":"U66","p":"U0","t":"scenario","who":"QA","obj":"S00-S15 matrix expectation","cur":"BLOCKED","s":"GP81 references absent `test/e2e/spec11-scenario-matrix.test.ts` (T32). Do not claim coverage-complete matrix until file exists+passes and script emits proofRefs (T33)."}

{"id":"U70","p":"U0","t":"proof-floor","who":"all","obj":"release truth lanes","cmd":["mise run quick","mise run check","mise run full","mise tasks deps check","mise run -f wf:crashdemo","mise run ci:quick","mise run ci:full"],"gate":["GP0","GP1","GP2","GP3","GP4","GP91"],"ok":"all green same tree","bad":"any red => NO_GO"}
{"id":"U71","p":"U70","t":"proof-floor","who":"QA+FDE","obj":"policy aggregate (semantic+self-test)","cmd":["mise run policy"],"gate":["GP41","GP90"],"ok":"self-tests run then repo scans","bad":"grep-only match is invalid proof"}
{"id":"U72","p":"U70","t":"proof-floor","who":"FDE","obj":"k6 evidence discipline","cmd":["mise run perf:k6:smoke","mise run perf:k6:ramp"],"gate":["GP66"],"note":"Run sequentially only; fixed-port parallelism invalidates perf evidence."}
{"id":"U73","p":"U70","t":"signoff","who":"PO+QA+FDE","s":"Binary rule: GO requires PF green + mandatory proofs green + rollback triggers inactive + evidence pointers present. Missing evidenceRefs on mandatory tiles => false-green => NO_GO."}
{"id":"U74","p":"U70","t":"signoff","who":"QA","obj":"signoff SQL divergence spot-check (two DBs)","sql":["scripts/db/psql-app.sh -Atc \"select workflow_id from app.runs order by created_at desc limit 20\"","scripts/db/psql-sys.sh -c \"select workflow_uuid,status from dbos.workflow_status where workflow_uuid in (<paste_wids>)\""],"task":["T24"],"note":"Do not cross-join app/sys DBs."}
{"id":"U75","p":"U70","t":"compat","who":"QA+FDE","obj":"legacy compat route gate stays deterministic","cmd":["pnpm exec vitest run test/integration/compat-approve-plan-gate.test.ts --config vitest.config.ts"],"gate":["GP92"],"ok":"ENABLE_LEGACY_RUN_ROUTES=false=>410; true=>deprecation headers"}

{"id":"U80","p":"U0","t":"gap","who":"PO","obj":"Run Console drift summary","task":["T1","T3","T5","T39"],"s":"Gate tab renders full timeline (not gate-only); `tab=proof` deep-link ignored; lattice error UX incomplete outside 409; some copy/time formatting still non-spec."}
{"id":"U81","p":"U0","t":"gap","who":"PO+QA","obj":"HITL Inbox/linking drift","task":["T4","T36"],"s":"Inbox deep-link emits `gate=` but run board ignores focus/scroll; origin enum duplicated in UI (schema drift risk). Workaround: land on gate tab then manually pick gate."}
{"id":"U82","p":"U0","t":"gap","who":"FDE","obj":"Ops board/drawer drift","task":["T7","T8","T9"],"s":"Drawer not fully fail-closed (actor blank/legality preview/reset). Some ops payloads unasserted; queue-depth age metrics incomplete. Trust API+SQL over board chrome."}
{"id":"U83","p":"U0","t":"gap","who":"QA+FDE","obj":"Proof/Repro drift","task":["T10","T11","T12","T13","T14","T37"],"s":"ProofCard ABI/projection/panel semantics are heuristic in places; tab filtering uses string heuristics; repro 404 mapping brittle; signoff seam fixed but other board seams still debt."}
{"id":"U84","p":"U0","t":"gap","who":"FDE","obj":"Topology/claim posture drift","task":["T15","T16"],"s":"Claim-scope contract enum polluted; topology diagnostics lack source-tagged health/parity evidence. Use env+healthz+dbos SQL for parity truth."}
{"id":"U85","p":"U0","t":"gap","who":"PO+QA+FDE","obj":"Throughput drift","task":["T17","T18","T19","T20","T38"],"s":"Throughput contract/ingestion/provenance incomplete; k6 summary parsing unstable; UI cards may overclaim. Verify each claim against SQL/artifact raw refs manually."}
{"id":"U86","p":"U0","t":"gap","who":"PO+FDE","obj":"Recipe/Patch UX drift","task":["T21","T22","T23"],"s":"Recipe board import/export/start path partial; patch review omits diffHash/guards/rollback detail. Use APIs + `app.recipe_*`/`app.patch_history` SQL."}
{"id":"U87","p":"U0","t":"gap","who":"PO+QA+FDE","obj":"Signoff/closure drift","task":["T24","T25","T26","T27","T28","T29","T30","T31","T32","T33","T34","T35","T40"],"s":"Signoff slice improved (sysPool divergence, semantic x1, false-green predicate, evidence normalization, client seam), but freshness/matrix/provenance/closure proofs remain incomplete; CY9 closure claim blocked."}
{"id":"U88","p":"U0","t":"gap","who":"PO","obj":"Layout/mobile drift","task":["T6"],"s":"Home shell still hardcodes 2-col min widths (320+420). Do desktop demos for signoff-grade walkthrough; treat mobile as exploratory only."}

{"id":"U90","p":"U0","t":"gate-map","who":"all","obj":"Scenario->proof gates (primary)","s":"S01 GP10/13; S02 GP11; S03 GP12/23; S04-S06 GP20-23; S07 GP30-32; S08 GP40-41; S09 GP50-51; S10-S11 GP60-66; S12-S13 GP70-72; S15 GP80(+GP81 pending)."}
{"id":"U91","p":"U0","t":"demo-seq","who":"PO+FDE","obj":"12-15m showcase path (current reality)","s":"S00 boot/posture -> S01 /api/run -> S04 gate reply -> S02 idem+409 -> S07 ops action+OPS artifact -> S08 repro export -> S15 signoff board (NO_GO explanation via open tasks)."}
{"id":"U92","p":"U0","t":"qa-pack","who":"QA","obj":"Minimum no-fraud pack before any claim","s":"Run U30-U39 + U70-U74. Must retain SQL/API outputs (`/tmp/*.json`, `.tmp/repro.*`, k6 summaries) with WIDs and timestamps."}
{"id":"U93","p":"U0","t":"fde-pack","who":"FDE","obj":"Incident rehearsal pack","s":"Run U40-U49 + U70-U74. If UI and SQL disagree, freeze UI claim, collect repro-pack, then inspect app SQL -> dbos SQL -> API serialization seam."}
{"id":"U94","p":"U0","t":"closeout","who":"all","cmd":["mkdir -p .tmp/spec11-tutorial","cp -f /tmp/spec11.* .tmp/spec11-tutorial/ 2>/dev/null || true","cp -f .tmp/repro.* .tmp/spec11-tutorial/ 2>/dev/null || true"],"note":"Archive proof artifacts; do not mark GO from memory/screenshots."}
{"id":"U95","p":"U0","t":"closeout","who":"FDE","s":"Stop services with project tasking (`mise run stop` if used). For custom harness teardown, cancel active workflows before DBOS shutdown to avoid hang on PENDING/ENQUEUED (learning CY9)."}
