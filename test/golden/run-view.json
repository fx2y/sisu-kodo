{
  "runId": "<HEX_ID>",
  "workflowId": "<HEX_ID>",
  "recipeRef": null,
  "recipeHash": null,
  "intentHash": null,
  "status": "succeeded",
  "steps": [
    {
      "stepId": "CompileST",
      "phase": "compilation",
      "output": {
        "goal": "test goal",
        "files": [
          "f1.ts"
        ],
        "risks": [
          "r1"
        ],
        "tests": [
          "test 1"
        ],
        "design": [
          "test plan"
        ],
        "attempt": 1
      },
      "startedAt": "<ISO_TS>",
      "finishedAt": "<ISO_TS>",
      "traceId": null,
      "spanId": null
    },
    {
      "stepId": "ApplyPatchST",
      "phase": "patching",
      "output": {
        "goal": "test goal",
        "files": [
          "f1.ts"
        ],
        "risks": [
          "r1"
        ],
        "tests": [
          "test 1"
        ],
        "design": [
          "test plan"
        ],
        "attempt": 1
      },
      "startedAt": "<ISO_TS>",
      "finishedAt": "<ISO_TS>",
      "traceId": null,
      "spanId": null
    },
    {
      "stepId": "DecideST",
      "phase": "planning",
      "output": {
        "diffs": [],
        "usage": {
          "total_tokens": 200
        },
        "prompt": "Approved Plan: {\"design\":[\"test plan\"],\"files\":[\"f1.ts\"],\"risks\":[\"r1\"],\"tests\":[\"test 1\"]}\n\nGoal: test goal\n\nGenerate patches and test command. Return ONLY JSON per schema.\n",
        "attempt": 1,
        "responses": [],
        "toolcalls": [],
        "structured": {
          "patch": [
            {
              "diff": "diff1",
              "path": "f1.ts"
            }
          ],
          "tests": [
            "test 1"
          ],
          "test_command": "ls"
        }
      },
      "startedAt": "<ISO_TS>",
      "finishedAt": "<ISO_TS>",
      "traceId": null,
      "spanId": null
    },
    {
      "stepId": "ExecuteST",
      "phase": "execution",
      "output": {
        "raw": {
          "tasks": [
            {
              "exit": 0,
              "attempt": 1,
              "errCode": "NONE",
              "metrics": {
                "cpuMs": 1,
                "wallMs": 1,
                "memPeakMB": 1
              },
              "taskKey": "<HEX64>",
              "artifactIndexRef": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/index.json"
            }
          ],
          "attempt": 1
        },
        "exit": 0,
        "stderr": "",
        "stdout": "OK: ls test 1\n",
        "attempt": 1,
        "errCode": "NONE",
        "metrics": {
          "cpuMs": 1,
          "wallMs": 1,
          "memPeakMB": 1
        },
        "taskKey": "aggregated",
        "filesOut": [
          {
            "path": "out.json",
            "inline": "{}",
            "sha256": "<HEX64>"
          }
        ],
        "sandboxRef": "mock-runner",
        "artifactIndexRef": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/index.json"
      },
      "startedAt": "<ISO_TS>",
      "finishedAt": "<ISO_TS>",
      "traceId": null,
      "spanId": null
    }
  ],
  "artifacts": [
    {
      "kind": "none",
      "uri": "artifact://run/<HEX_ID>/step/ApplyPatchST/task//none",
      "inline": {
        "status": "no_artifacts"
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "plan_card",
      "uri": "artifact://run/<HEX_ID>/step/CompileST/task//plan.json",
      "inline": {
        "goal": "test goal",
        "files": [
          "f1.ts"
        ],
        "risks": [
          "r1"
        ],
        "tests": [
          "test 1"
        ],
        "design": [
          "test plan"
        ]
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "patch",
      "uri": "artifact://run/<HEX_ID>/step/DecideST/task//f1.ts.patch",
      "inline": {
        "diff": "diff1",
        "path": "f1.ts"
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "artifact_index",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/index.json",
      "inline": {
        "json": {
          "items": [
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/files/out.json",
              "kind": "file",
              "sha256": "<HEX64>"
            },
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/metrics.json",
              "kind": "timings",
              "sha256": "<HEX64>"
            },
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/raw.json",
              "kind": "raw",
              "sha256": "<HEX64>"
            },
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/sbx-boot.json",
              "kind": "json_diagnostic",
              "sha256": "<HEX64>"
            },
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/stderr.log",
              "kind": "stderr",
              "sha256": "<HEX64>"
            },
            {
              "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/stdout.log",
              "kind": "stdout",
              "sha256": "<HEX64>"
            }
          ],
          "rawRef": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/raw.json",
          "taskKey": "<HEX64>",
          "provider": "mock",
          "createdAt": "<ISO_TS>"
        }
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "file",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/files/out.json",
      "inline": {
        "text": "{}"
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "timings",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/metrics.json",
      "inline": {
        "json": {
          "cpuMs": 1,
          "wallMs": 1,
          "memPeakMB": 1
        }
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "raw",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/raw.json",
      "inline": {
        "json": {
          "ctx": {
            "runId": "<HEX_ID>",
            "stepId": "ExecuteST"
          },
          "mock": true,
          "bootMs": 50,
          "provider": "mock",
          "template": {
            "envRef": "local-node-24",
            "source": "cold",
            "depsHash": "<HEX64>",
            "templateKey": "env:local-node-24"
          }
        }
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "json_diagnostic",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/sbx-boot.json",
      "inline": {
        "json": {
          "bootMs": 50,
          "envRef": "local-node-24",
          "source": "cold",
          "depsHash": "<HEX64>",
          "templateKey": "env:local-node-24"
        }
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "stderr",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/stderr.log",
      "inline": {
        "text": ""
      },
      "sha256": "<HEX64>"
    },
    {
      "kind": "stdout",
      "uri": "artifact://run/<HEX_ID>/step/ExecuteST/task/<HEX64>/stdout.log",
      "inline": {
        "text": "OK: ls test 1\n"
      },
      "sha256": "<HEX64>"
    }
  ],
  "traceId": "test-trace",
  "lastStep": "ExecuteST",
  "retryCount": 0
}